<!doctype html>
<html lang="en" color-mode="dark">
  <head>
    <style id="cssPreview"></style>
    <script>
    globalThis.lo = (...a) => console.log('ðŸŒ¼', ...a);
    </script>
    <style>
      --debug-show-component-names: inline;
    </style>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Upsy Daisy</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŒ¼</text></svg>" />

    <link href="modules/epidermis/reset.css" rel="stylesheet" />
    <link href="modules/epidermis/controls.css" rel="stylesheet" />
    <link href="modules/epidermis/application.css" rel="stylesheet" />

    <link href="src/theme.css" rel="stylesheet" />
    <link href="src/style.css" rel="stylesheet" />

    <script src="assets/prism/prism.js" data-manual></script>
    <link href="assets/prism/prism.css" rel="stylesheet" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.15.4/beautify-css.js"></script>


        <script type="importmap">
      {
        "imports": {


          "#web-application": "./modules/blueberries/web-application/WebApplication.js",
          "#application-messages": "./modules/blueberries/application-messages/ApplicationMessages.js",

          "#gradient-bar": "./modules/blueberries/gradient-bar/GradientBar.js",
          "#gradient-stops": "./modules/blueberries/gradient-stops/GradientStops.js",
          "#level-builder": "./modules/blueberries/level-builder/LevelBuilder.js",

          "#switch-panel": "./modules/blueberries/switch-panel/SwitchPanel.js",


          "#sinusoid": "./modules/sinusoid/index.js",
          "#ladybits": "./modules/ladybits/index.js"

        }
      }
    </script>
    <!--
    <script type="importmap">
      {
        "imports": {
          "#link-style": "./link-style/LinkStyle.js",

          "#offcanvas-panel": "./offcanvas-panel/OffcanvasPanel.js",
          "#switch-panel": "./switch-panel/SwitchPanel.js",
          "#tab-panel": "./tab-panel/TabPanel.js",
          "#horizontal-view": "./horizontal-view/HorizontalView.js",

          "#gradient-bar": "./gradient-bar/GradientBar.js",
          "#gradient-stops": "./gradient-stops/GradientStops.js",
          "#theme-grid": "./theme-grid/ThemeGrid.js",

          "#gradient-builder": "./gradient-builder/GradientBuilder.js",
          "#level-builder": "./level-builder/LevelBuilder.js",

          "#theme-customizer": "./theme-customizer/ThemeCustomizer.js",

          "#iridescence": "./modules/iridescence/index.js",
          "#heebiejeebies": "./modules/heebiejeebies/index.js",
          "#mlue": "./modules/mlue/index.js",
          "#sinusoid": "./modules/sinusoid/index.js",
          "#ladybits": "./modules/ladybits/index.js"
        }
      }
    </script>-->

    <script type="module">

      import { WebApplication } from "#web-application";
      customElements.define("web-application", WebApplication);

      import { ApplicationMessages } from "#application-messages";
      customElements.define("application-messages", ApplicationMessages);

      ///

      import { GradientBar } from "#gradient-bar";
      customElements.define("gradient-bar", GradientBar);

      import { GradientStops } from "#gradient-stops";
      customElements.define("gradient-stops", GradientStops);

      import { LevelBuilder } from "#level-builder";
      customElements.define("level-builder", LevelBuilder);

      ///

      import { SwitchPanel } from "#switch-panel";
      customElements.define("switch-panel", SwitchPanel);


    </script>

    <!--<script type="module">
      import { LinkStyle } from "#link-style";
      import { OffcanvasPanel } from "#offcanvas-panel";
      import { SwitchPanel } from "#switch-panel";
      import { TabPanel } from "#tab-panel";
      import { HorizontalView } from "#horizontal-view";

      import { GradientBar } from "#gradient-bar";
      import { GradientStops } from "#gradient-stops";
      import { ThemeGrid } from "#theme-grid";

      import { GradientBuilder } from "#gradient-builder";
      import { LevelBuilder } from "#level-builder";

      import { ThemeCustomizer } from "#theme-customizer";

      customElements.define("link-style", LinkStyle);

      customElements.define("offcanvas-panel", OffcanvasPanel);
      customElements.define("switch-panel", SwitchPanel);

      customElements.define("tab-panel", TabPanel);
      customElements.define("horizontal-view", HorizontalView);

      customElements.define("gradient-bar", GradientBar);
      customElements.define("gradient-stops", GradientStops);
      customElements.define("theme-grid", ThemeGrid);

      customElements.define("gradient-builder", GradientBuilder);
      customElements.define("level-builder", LevelBuilder);

      customElements.define("theme-customizer", ThemeCustomizer);
    </script>-->

  </head>

  <body style="padding-top: 4rem;">

    <div class="container">


    <web-application class="sidebar-application theme1">

      <header class="text-sm">Upsy Daisy &middot; Gradient Smart Theme Builder</header>

      <figure>
        <!--<img src="logo.svg" alt="App Logo" />-->
      </figure>

      <!-- Search box -->
      <!--<search-form placeholder="Searchâ€¦">searchform</search-form>-->

      <!-- Profile / user info -->
      <user-info fullname="Jane Doe" username="jdoe" avatar="jdoe.png"></user-info>

      <!-- Main navigation menu -->
      <nav>

        <level-builder id="levelBuilder"></level-builder>

      </nav>

      <!-- Alerts / notifications -->
      <alert-region>
        <application-messages></application-messages>
      </alert-region>

      <!-- Properties / inspector panel -->
      <aside>
        <h6>Context Sensitive Properties</h6>
        <switch-panel id="userActivity" data-selected="second">

          <section data-id="idle" style="display: none;">
            idle view content
          </section>

          <section data-id="color-stop" style="display: none;">
            color stop selected
          </section>

          <section data-id="second" style="display: none;">
            second view content
          </section>

        </switch-panel>
      </aside>

      <!-- Main workspace -->
      <main>
        <p style="min-height: 20rem">Mini Preview</p>
        <p style="min-height: 20rem">Color Table</p>
      </main>

      <!-- Footer -->
      <footer>
      </footer>

    </web-application>


    <script type="module">

      import { Signal, DisposableSinusoidalListener } from "#sinusoid";

      const application = document.querySelector('web-application');

      application.colorStops = new Signal([
        { percentage: 0, color: "#03141C" },
        { percentage: 55, color: "#3B9C93" },
        { percentage: 100, color: "#083145" },
      ]);

      const levelBuilder = document.querySelector('#levelBuilder');
      application.colorStops.subscribe( v=>levelBuilder.setAttribute("gradient-stops", JSON.stringify(v)) );

      // levelBuilder.addEventListener("gradient-changed", (e) => {
        // this.#colorStops = e.detail.stops;
        // const stopsJson = JSON.stringify(this.#colorStops);
        // this.themeGrid.setAttribute("gradient-stops", stopsJson);
      // });

      ///

      const userActivity = document.querySelector('#userActivity');
      application.userActivity = new Signal( {id:'idle'} );

      // Activate The Correct View
      application.userActivity.subscribe( v=>userActivity.setAttribute('view', v.id));


      // Use The Data from the userActivity Signal to seed something...
      application.userActivity.subscribe( v=> document.querySelector('section[data-id=color-stop]').textContent = JSON.stringify(v, null, 2) );


    </script>

  </div>
</html>
